// mehran tamjidi

#include <mega16.h>  
#include <delay.h>  
#define  RS        PORTC.0
#define  RW        PORTC.1
#define  E         PORTC.2
#define  CS1       PORTC.3
#define  CS2       PORTC.4
#define  Reset     PORTC.5
#define  DATA_LCD  PORTA  
unsigned char addrx_cs1=0,addrx_cs2=0,line=0;
unsigned int pointer=0; 
//----------------------------------------------------
flash unsigned char dis[1024]={
 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
 0,0,0,0,0,0,0,0,0,0,0,0,240,248,0,0,
 0,64,96,48,24,12,0,0,128,128,128,128,0,0,2,4,
 0,0,0,0,0,192,224,224,192,0,0,0,0,0,0,0,
 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
 0,0,0,0,0,0,0,0,0,0,0,0,0,0,48,32,
 48,32,48,0,60,120,64,64,70,126,122,3,7,15,12,12,
 12,12,12,15,12,12,12,15,15,13,13,7,3,0,0,0,
 64,64,96,48,24,12,7,3,1,0,0,0,0,0,0,0,
 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
 0,0,0,0,0,0,0,0,128,64,0,0,0,56,32,16,
 12,28,48,32,32,62,32,32,30,0,0,62,0,0,0,0,
 255,254,248,224,128,0,0,0,0,32,48,24,12,6,0,0,
 0,0,0,0,0,0,254,255,239,143,15,15,15,159,159,255,
 254,252,248,240,192,0,0,0,0,0,0,0,0,0,0,0,
 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
 0,0,0,0,0,0,0,129,194,224,0,0,0,0,192,0,
 8,4,2,0,0,0,128,0,0,254,0,0,96,144,144,64,
 0,1,15,127,255,254,240,128,0,14,8,142,142,200,238,224,
 240,240,248,120,124,60,62,31,31,15,31,255,255,7,7,3,
 3,3,1,1,129,192,96,48,112,112,0,0,0,0,0,0,
 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
 0,0,0,0,0,0,0,128,193,65,113,113,49,9,255,129,
 1,1,1,9,1,9,1,129,1,129,1,129,1,1,192,224,
 224,0,0,0,3,15,255,255,252,126,127,127,127,127,127,125,
 121,248,248,248,248,248,248,248,248,248,248,248,248,248,248,248,
 248,248,249,121,121,120,56,24,8,0,0,0,0,0,0,0,
 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
 0,0,0,0,0,2,3,1,0,0,0,0,0,252,0,1,
 3,131,195,99,67,99,67,99,3,3,3,1,8,12,12,7,
 131,192,240,240,56,30,15,7,127,254,248,224,192,224,240,124,
 30,15,15,7,7,3,3,1,113,9,0,0,0,0,0,0,
 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
 0,0,0,0,0,0,0,0,0,0,0,0,0,31,124,240,
 225,225,224,224,224,224,224,224,224,240,112,120,60,30,30,15,
 7,3,1,0,0,0,0,0,0,1,7,15,31,63,127,252,
 248,240,224,224,224,192,0,0,0,0,0,0,192,164,156,192,
 64,32,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
 1,1,3,3,3,3,1,1,1,0,0,0,0,64,64,96,
 48,24,12,6,14,14,0,0,0,0,128,64,32,32,192,48,
 16,1,1,3,3,1,0,0,0,0,0,0,0,0,0,0,
 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0 
};
//_________________________________________________
void Data_command(){
delay_us(500);
RS=0;
RW=0;
E=1;
delay_us(1);
E=0;
}
//_________________________________________________
void Data_display(){
delay_us(500);
RS=1;
RW=0;
E=1;      
delay_us(1);
E=0;
}  
//_________________________________________________
void table(){
unsigned char i; 
for(i=0;i<64;i++){
DATA_LCD=dis[pointer];
pointer++;
Data_display();
 } 
}
//_________________________________________________
void display_Right(){
DATA_LCD=0x40;
Data_command();
addrx_cs1++;
DATA_LCD=addrx_cs1;
Data_command();
DATA_LCD=0x3f;
Data_command(); 
table();
}
//_________________________________________________
void display_Left(){
DATA_LCD=0x40;
Data_command();
addrx_cs2++;
DATA_LCD=addrx_cs2;
Data_command();
DATA_LCD=0x3f;
Data_command(); 
table();
}
//_________________________________________________
void setting(){    
unsigned char j;
for(j=0;j<line;j++){ 
 CS1=1;
 CS2=0;
 display_Left();
 CS1=0;
 CS2=1;
 display_Right(); 
 }
}
//_________________________________________________
void reset_glcd(){
Reset=0;
delay_us(3);
Reset=1;
}   
//_________________________________________________
void display(){
addrx_cs1=0xb7;
addrx_cs2=0xb7;
line=8; 
setting();
}
//_________________________________________________
void main(){  
PORTC=0X00;
DDRC=0XFF;
PORTA=0X00;
DDRA=0XFF;
reset_glcd();
display();
while (1){
   };
}
